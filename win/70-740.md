[1.1]: #upgrade-and-migration "Install, upgrade and migrate servers and workloads"
[1.2]: #nano-server "Install and configure Nano Server"
[1.3]: #images "Create, manage, and maintain images for deployment"
[2.1]: #disks-and-volumes "Configure disks and volumes"
[2.2]: #server-storage "Implement server storage"
[2.3]: #data-deduplication "Implement data deduplication"
[3.1]: #hyper-v-configuration "Install and configure Hyper-V"
[3.2]: #vm-configuration "Configure virtual machine (VM) settings"
[3.3]: #hyper-v-storage "Configure Hyper-V storage"
[3.4]: #hyper-v-networking "Configure Hyper-V networking"
[4.1]: #container-deployment "Deploy Windows containers"
[4.2]: #container-management "Manage Windows containers"
[5.1]: #high-availability "Implement high availability and disaster recovery options in Hyper-V"
[5.2]: #failover-clustering "Implement failover clustering"
[5.3]: #storage-spaces-direct "Implement Storage Spaces Direct"
[5.4]: #cluster-management "Manage failover clustering"
[5.5]: #moving-cluster-vms "Manage VM movement in clustered nodes"
[5.6]: #nlb "Implement Network Load Balancing"
[6.1]: #maintenance "Maintain server installations"
[6.2]: #monitoring "Monitor server installations"

[Zacker]: https://github.com/jasper-zanjani/notes/master/certs/70-740.md "Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017."
[n/pwsh]: https://github.com/jasper-zanjani/notes/master/win/pwsh.md "Powershell notes"


<!--- CMD commands -->
[Azman.msc]: README.md#azman.msc '```&#10;C:\>Azman.msc&#10;```&#10;Authorization Manager, tool for granting specific privileges to users; deprecated in Windows Server 2012 R2&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 174'
[cmdkey.exe]: README.md#cmdkey.exe '```&#10;C:\>cmdkey.exe&#10;```&#10;Creates, lists, and deletes stored user names and passwords or credentials'
[Configure-SMRemoting.exe]: README.md#configure-smremoting.exe '```&#10;C:\>Configure-SMRemoting.exe&#10;```&#10;Enable remote management using Server Manager'
[ddpeval.exe]: README.md#ddpeval.exe '```&#10;C:\>ddpeval.exe&#10;```&#10;Data Deduplication Savings Evaluation Tool that can be used to test a volume to see how much storage savings can result from optimization'
[dism.exe]: README.md#dism.exe '```&#10;C:\>dism.exe&#10;```&#10;"Deployment Image Servicing and Management", enables modification of VHD and Windows Imaging files while they are offline&#10;Sobell, Mark. _Practical Guide to Linux_. 2017.: 70'
[VMConnect.exe]: README.md#vmconnect.exe '```&#10;C:\>VMConnect.exe&#10;```&#10;"Virtual Machine Connection", Hyper-V tool used to connect to a running VM and access its desktop'

# Installation, Storage and Compute with Windows Server 2016 (70-740)
## Topics
- [x] [1.1][1.1] [Upgrade and migration](#upgrade-and-migration)
- [x] [1.2][1.2] [Nano Server](#nano-server)
- [x] [1.3][1.3] [Images](#images)
- [x] [2.1][2.1] [Disks and volumes](#disks-and-volumes)
- [x] [2.2][2.2] [Server storage](#server-storage)
- [x] [2.3][2.3] [Data deduplication](#data-deduplication)
- [x] [3.1][3.1] [Hyper-V configuration](#hyper-v-configuration)
- [x] [3.2][3.2] [VM configuration](#vm-configuration)
- [ ] [3.3][3.3] [Hyper-V storage](#hyper-v-storage)
- [x] [3.4][3.4] [Hyper-V networking](#hyper-v-networking)
- [ ] [4.1][4.1] [Container deployment](#container-deployment)
- [ ] [4.2][4.2] [Container management](#container-management)
- [x] [5.1][5.1] [High availability](#high-availability)
- [ ] [5.2][5.2] [Failover clustering](#failover-clustering)
- [x] [5.3][5.3] [Storage Spaces Direct](#storage-spaces-direct)
- [ ] [5.4][5.4] [Moving cluster VMs](#moving-cluster-vms)
- [ ] [5.5][5.5] [NLB](#nlb)
- [ ] [6.1][6.1] [Maintenance](#maintenance)
- [ ] [6.2][6.2] [Monitoring](#monitoring)

[servicing channel]: # 'servicing channel&#10;provide a way of separating users into deployment groups for feature and quality updates'
[Semi-Annual Channel]: # 'Semi-Annual Channel&#10;previously "Current Branch for Business (CBB)", servicing channel that receives feature updates twice a year'
[LTSC]: # 'Long Term Servicing Channel (LTSC)&#10;servicing branch with a minimum servicing lifetime of 10 years, designed to be used only for specialized devices such as those that control medical equipment or ATM machines, receiving new feature releases every 2-3 years'

- [Servicing channels][servicing channel]
  - [Semi-Annual Channel][Semi-Annual Channel]
  - [Long Term Servicing Channel][LTSC]

### Installation
#### Upgrade and migration
[Activation threshold]: #upgrade-and-migration 'Activation threshold&#10;Minimum of 25 workstation systems or five server systems as clients for KMS&#10;KMS hosts maintain a cache of the 50 most recent workstation requests, and KMS activations expire every 180 days (ref Activation validity interval). &#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 36'
[Activation validity interval]: #upgrade-and-migration 'Activation validity interval&#10;180 days for KMS activations, although clients attempt to renew every 7 days&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 37'
[Active Directory-based activation]: #upgrade-and-migration 'Active Directory-based activation&#10;Use of AD DS for communication and data storage instead of a KMS host&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 39'
[AVMA]: #upgrade-and-migration 'Automatic Virtual Machine Activation (AVMA)&#10;Simplifies the process of activating VMs created on Hyper-V servers, whereby a binding is created between the host server and the activation mechanism on each VM, which are activated automatically and remain so.&#10;Requires Datacenter Edition of WS 2016 or WS 2012 R2 on the host server and a specific key, depending on the version of Windows Server on the VM.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 41'
[clean installation]: #upgrade-and-migration 'clean installation&#10;also "bare-metal installation", installing an OS on a computer that does not already have one&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 6'
[DCOM]: #upgrade-and-migration 'Distributed Component Object Model (DCOM)&#10;used by MMC for remote management&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 25'
[DSC]: #upgrade-and-migration 'Desired State Configuration (DSC)&#10;Windows PowerShell feature that uses script files stored on a central server to apply, monitor, and maintain a specific configuration&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 26'
[feature]: #upgrade-and-migration 'feature&#10;component smaller than a role&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 11'
[GVLK]: #upgrade-and-migration 'generic volume licensing key (GVLK)&#10;Can be used to configure KMS clients that are not KMS clients by default, like those with retail, MAK, or KMS host licenses&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 39'
[idempotency]: #upgrade-and-migration 'idempotency&#10;quality of scripts that can be applied repeatedly without generating errors&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 26'
[KMS]: #upgrade-and-migration 'Key Management Service (KMS)&#10;Client/server application that enables client computers to activate their license doperating system products by communicating with a KMS host computer on the local network (suitable for large networks).&#10;Requires a minimum of 25 workstations (ref Activation threshold) and uses TCP port 1688. KMS hosts create an SRV resource record on DNS to identify it.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 35'
[LCM]: #upgrade-and-migration 'Local Configuration Manager (LCM)&#10;engine running on the client system that receives configurations from the DSC server and applies them to the target computer&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 26'
[MAK Independent]: #upgrade-and-migration 'MAK Independent&#10;each computer using the MAK must perform an individual activation with Microsoft over the Internet or by telephone&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 36'
[MAK Proxy]: #upgrade-and-migration 'MAK Proxy&#10;VMAT collects installation IDs from target computers, activates them all at once, then receives and deploys confirmation IDs from Microsoft back to targets&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 36'
[MAK]: #upgrade-and-migration 'Multiple activation key (MAK)&#10;Product key that can be used to activate multiple Windows systems (suitable for small networks).&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 35'
[migration]: #upgrade-and-migration 'migration&#10;clean installation on a new computer with old data transferred over&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 28'
[MMC snap-in]: #upgrade-and-migration 'MMC snap-in&#10;Windows administrative tools&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 25'
[MOF]: #upgrade-and-migration 'Management Object Format (MOF)&#10;file created for each computer specified in the `Node` block of a DSC script, as well as the associated file format; the actual scripts that are distributed to the DSC clients&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 27'
[network controller]: #upgrade-and-migration 'network controller&#10;Windows Server 2016 Datacenter edition feature that provides a central automation point for network infrastructure configuration, monitoring, and troubleshooting&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 6'
[node block]: #upgrade-and-migration 'node block&#10;component of DSC scripts that specify the names of computers to be configured (i.e. targets)&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 26'
[pull architecture]: #upgrade-and-migration 'pull architecture&#10;client computer LCM creates a scheduled task to retrieve MOF file from a Pull Server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 27'
[Pull Server]: #upgrade-and-migration 'Pull Server&#10;client computers have LCM configured to pull from a Pull Server periodically, checking the local system for compliance&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 27'
[push architecture]: #upgrade-and-migration 'push architecture&#10;configured on the server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 27'
[resource block]: #upgrade-and-migration 'resource block&#10;component of DSC scripts that specify settings or components and the values that configuration script should assign to them&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 26'
[role]: #upgrade-and-migration 'role&#10;predefined combinations of services in Windows Server 2016&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 11'
[S2D]: #storage-spaces-direct 'Storage Spaces Direct (S2D)&#10;Windows Server 2016 Datacenter edition feature that enables administrators to use relatively inexpensive drive arrays to create high-availability storage solutions, implementing JBOD&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 5'
[shielded virtual machines]: #upgrade-and-migration 'shielded virtual machines&#10;Windows Server 2016 Datacenter edition feature that provides VMs with protection from compromised administrators that have access to the Hyper-V host computer by encrypting the VM state and virtual disks&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 6'
[Storage Replica]: #server-storage 'Storage Replica&#10;Windows Server 2016 Datacenter edition feature that provides storage-agnostic, synchronous or asynchronous volume replication between local or remote servers, using SMBv3&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 6'
[upgrade]: #upgrade-and-migration 'upgrade&#10;installation performed in-place with existing data intact&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 27'
[VAMT]: #upgrade-and-migration 'Volume Activation Management Tool (VAMT)&#10;Collects installation IDs from target computers, sending them to Microsoft using a single connection and receiving confirmation IDs in return, which are deployed to targets.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 35'
[Volume Activation Services]: #upgrade-and-migration 'Volume Activation Services&#10;Windows Server role that must be added before installing a KMS host&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 37'
[Volume Activation Tools]: #upgrade-and-migration 'Volume Activation Tools&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 37'
[Volume Licensing Services]: #upgrade-and-migration 'Volume Licensing Services&#10;Windows Server role that must be added before being able to use Active Directory-based activation&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 40'
[WDS]: #upgrade-and-migration 'Windows Deployment Services (WDS)&#10;Role included with Windows server 2016 which can deploy disk image files to clients on the network automatically.&#10;Used to deploy operating systems en masse.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 11'
[Windows Hyper-V Server 2016]: #upgrade-and-migration 'Windows Hyper-V Server 2016&#10;Free hypervisor-only download that hosts VMs.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 5'
[Windows Server 2016 Datacenter]: #upgrade-and-migration 'Windows Server 2016 Datacenter&#10;Edition that allows unlimited number of operating system environments or Hyper-V containers and includes Storage Spaces Direct, Storage Replica, shielded VMs, and a new networking stack with additional virtualization options&#10;Intended for large and powerful servers in a highly virtualized environment.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 4'
[Windows Server 2016 Essentials]: #upgrade-and-migration 'Windows Server 2016 Essentials&#10;Edition that is limited to one OSE and a maximum of 25 users and 50 devices and excludes the Server Core installation option&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 5'
[Windows Server 2016 MultiPoint Premium Server]: #upgrade-and-migration 'Windows Server 2016 MultiPoint Premium Server&#10;Academic edition that enables multiple users to access a single server installation&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 5'
[Windows Server 2016 Standard]: #upgrade-and-migration 'Windows Server 2016 Standard&#10;Edition that allows for two operating system environments, but lacks the storage and networking features included in Datacenter.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 5'
[Windows Storage Server 2016]: #upgrade-and-migration 'Windows Storage Server 2016&#10;Bundled as part of a dedicated storage hardware solution&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 5'

[Windows Server Migration Tools]: #upgrade-and-migration 'Windows Server Migration Tools&#10;Five Windows Powershell cmdlets that enable administrators to migrate certain roles between servers&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 33'
[SmigDeploy.exe]: README.md#smigdeploy.exe '```&#10;C:\>SmigDeploy.exe&#10;```&#10;Create a new folder in specified directory, registering Windows Server Migration Tools on the source server and opening a Powershell window in which they can be used&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 34'

Windows Server 2016 installations are determined by the installation method ([upgrade][upgrade], [migration][migration], or clean installation), installation option (Desktop Experience, Server Core, or Nano Server) and edition ([Standard][Windows Server 2016 Standard], [Essentials][Windows Server 2016 Essentials], [Multipoint Premium][Windows Server 2016 MultiPoint Premium Server], [Storage][Windows Storage Server 2016], [Hyper-V][Windows Hyper-V Server 2016], and Datacenter) most suitable.
Windows Server 2016 [Datacenter][Windows Server 2016 Datacenter] edition features not available in other editions include: [Storage Spaces Direct][S2D], [Storage Replica][Storage Replica], [Shielded VMs][shielded virtual machines], and [network controller][network controller].
Installing the Windows Server 2016 Server Core foregoes the possibility of later switching back to Desktop Experience, as had been possible in previous editions. 
Configuring Server Core requires the command-line or [Powershell](pwsh.md#configure-server-core), including installation of [roles][role] and [features][feature]. <sup>[pwsh][Install-WindowsFeature]</sup>

Server Core installations can be managed with a GUI with the use of [MMC snap-ins][MMC snap-in]. 
Because MMC is reliant on [DCOM][DCOM], the firewall has to be [opened](pwsh.md#set-netfirewallrule "Set-NetFirewallRule").

IaaS management of servers is possible with [idempotent][idempotency] [DSC][DSC] scripts. DSC components include the [LCM][LCM] and [node][node block] and [resource][resource block] blocks. DSC configurations can be deployed in [push][push architecture] or [pull][pull architecture] **refresh modes** which are distinguished primarily by the manner in which [MOF][MOF] files are treated. 

Pull architectures depend on a [Pull Server][Pull Server] to consolidate MOF files, and individual client nodes "pull" their specific configuration script from it. 
Push architectures depend on running [`Start-DscConfiguration`](pwsh.md#start-dscconfiguration "Start-DscConfiguration") on the control server to "push" the configuration to each client.

Pull                | Push
---                 | ---
![](pullmodel.png)  | ![](pushmodel.png)

Migrations are facilitated by [Powershell][Windows Server Migration Tools] and [command prompt][SmigDeploy.exe] tools

Server installations are also influenced by choice of activation model. 
[MAK][MAK] is suitable for small networks, but large enterprises may opt for [KMS][KMS] or [Active Directory-based activation][Active Directory-based activation].
MAK activations are subdivided into [Independent][MAK Independent] and [Proxy][MAK Proxy], based on whether or not a [VAMT][VAMT] is used.
KMS activations, which distribute [GVLK][GVLK]s, are valid for a [period of time][Activation validity interval] and require the installation of a [role][Volume Activation Services] and [management tools][Volume Activation Tools].
KMS operates on TCP port 1688.
Finally, [AVMA][AVMA] simplifies the process of activating Hyper-V VMs running Windows Server 2012 or 2016.
#### Nano Server
[Nano Server]: #nano-server 'Nano Server&#10;Headless Windows Server installation option with no local user interface, no 32-bit application support, and only basic configuration controls. Administration requires remote WinRM connections and WMI tools&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 42'
[Nano Server Recovery Console]: #nano-server 'Nano Server Recovery Console&#10;Text-based interface that provides minimal controls needed to configure remote administration client capabilities of a Nano Server system.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 50'
[Powershell Core]: #nano-server 'Powershell Core&#10;subset of Powershell Desktop, omitting many of its features&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 57'

[Nano Server][Nano Server], a new installation option introduced in Windows Server 2016, provides a much smaller footprint and attack surface than even Server Core, but supports only some roles and features.
Installation is done by [building a VHD image][New-NanoServerImage] on another computer, which is then deployed as a VM or used as a boot drive for a physical server.
The Windows Server 2016 installation media contains a NanoServer directory, from which the `nanoserverimagegenerator` Powershell module must be imported.
It also contains a Packages subdirectory, with CAB files containing roles and features that correspond to named parameters or packages that are specified as values to the `Packages` named parameter when building a Nano Server image.

Booting a Nano Server VM produces a [terminal-based][Nano Server Recovery Console] menu system that allows configuration of static network options (DHCP is enabled by default).
The DNS server may not be configured interactively, but must be specified when building the image with the `Ipv4Dns` parameter.

If a Nano Server is domain-joined a remote Powershell session will authenticate via Kerberos. If not, its name or IP address must be added to the Trusted Hosts list.
#### Images
Many enterprises have begun virtualizing their server environments to take advantage of the many cost, reliability, and performance benefits that this change creates.
Migrations should start with systems that are peripheral to main business interests before moving on to those that are more vital.
A carefully documented protocol should be developed to facilitate the conversion of physical hard disks to VHDs for use in Hyper-V guests.
Supported guest OSes include Linux and FreeBSD.

The **Microsoft Assessment and Planning (MAP) Toolkit** is a free software tool that intelligently constructs a database of the hardware, software, and performance of computers on a network to plan for an operating system upgrade or virtualization.
MAP supports the following discovery methods:
- Active Directory Domain Services
- Windows networking protocols
- System Center Configuration Manager
- IP address range scanning
- Computer names entered manually or imported from a file

Server Core relies on the [command-line](pwsh.md#update-server-core-image "Update Server Core image") for system maintenance, including updates which must be installed directly to the image using [`dism.exe`][dism.exe] or equivalent Powershell commands.
### Storage
#### Disks and volumes
[block]: # 'allocation unit (block)&#10;smallest amount of disk space that the computer can allocate when storing a file (sometimes incorrectly called a "sector")&#10;Sobell, Mark. _Practical Guide to Linux_. 2017.: 82'
[sector]: # 'sector&#10;subdivision of a track, traditionally 512 bytes (Advanced Format disks use 4,096-byte sectors)&#10;Sobell, Mark. _Practical Guide to Linux_. 2017.: 82'
[slack space]: # 'slack space&#10;space left over when a file occupies only part of a block&#10;Sobell, Mark. _Practical Guide to Linux_. 2017.: 82'
[MBR]: # 'Master Boot Record (MBR)&#10;Older partition table type introduced in 1983 that is still common, despite its limitations.&#10;MBR partitions supports volumes up to 2 TB in size with up to 4 primary partitions.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 85'
[GPT]: # 'GUID partition table (GPT)&#10;Newer partition table type, introduced in the late 1990s, but not supported in Windows prior to Windows Server 2008 and Windows Vista.&#10;The GPT specification supports an unlimited number of partitions on volumes up to 18 exabytes.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 86'
[VHD]: # 'VHD&#10;"Virtual Hard Disk", virtual hard disk image format and file name extension supported by Windows Server.&#10;VHD images are limited to a maximum size of 2 TB and are compatible with servers running Windows Server 2008 or later, or workstations running Windows 7 or later.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 88'
[VHDX]: # 'VHDX&#10;Newer hard disk image format and file name extension.&#10;VHDX image files can be as large as 64 TB, and they also support 4 KB logical sector sizes to provide compatibility with 4 KB native drives. VHDX files can be read only by servers running Windows Server 2012 or later or workstations running Windows 8 or later.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 88'

Every track of a hard drive platter is split into disk [sectors][sector], traditionally 512 bytes.
A [block][block] is commonly called an "allocation unit" in Windows, but also commonly called a cluster.
Storage left over unused in partially unused [blocks][block] is known as [slack space][slack space].
Partition tables can be [MBR][MBR] and [GPT][GPT].

[VHD][VHD] and [VHDX][VHDX] can be [created][New-VHD] and [mounted][Mount-VHD] in Powershell.

Windows Server 2016 supports [SMB][SMB] and [NFS][NFS] folder shares.
#### Server storage
[Storage Spaces]: #server-storage 'Storage Spaces&#10;disk virtualization technology that enables a server to combine the storage space from individual physical disks and allocate that space to create virtual disks of any size supported by the hardware.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 123'
[ReFS]: #images 'Resilient File System (ReFS)&#10;New file system that uses checksums to protect volume metadata and supports the same system of permissions as NTFS; intended for use in Storage Spaces pools.&#10;ReFS volumes have a maximum size of 1 yobibyte (2 ^ 80 bytes) and a maximum file size of 16 exabytes.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 94'
[DCB]: #server-storage 'datacenter bridging (DCB)&#10;IEEE standards that define mechanisms for flow control and bandwidth management on a network with multiple traffic types&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 143'
[thinly provisioned]: #server-storage 'thinly provisioned&#10;virtual disk with a maximum size larger than that of currently available storage space&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 126'
[Simple fault tolerance]: #server-storage 'Simple fault tolerance&#10;Data is striped across all of the physical disks in the pool with no fault tolerance&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 127'
[Mirror fault tolerance]: #server-storage 'Mirror fault tolerance&#10;Data is written to two or three physical disks, so that a copy is always immediately available in case of failure.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 127'
[Parity fault tolerance]: #server-storage 'Parity fault tolerance&#10;Data is striped across 3 or more physical disks in the pool along with parity information, which allows reconstruction of data if a physical disk fails&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 128'
[hot spare]: #server-storage 'hot spare&#10;disk that is part of the pool, but its space is not used until a disk failure occurs&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 130'
[tiered storage]: #server-storage 'tiered storage&#10;Storage Spaces feature that enables administrators to use their higher-performance storage devices for their most commonly used files&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 131'

[iSCSI]: #server-storage 'Internet Small Computer System Interface (iSCSI)&#10;SAN technology that enables servers and storage devices to exchange SCSI traffic over an IP network, rather than the more expensive Fibre Channel&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 133'
[iSCSI initiator]: #server-storage 'iSCSI initiator&#10;hardware or software device running on a computer that accesses the storage devices on the SAN and takes the place of the host adapter that traditional SCSI implementations used to connect storage cdevices to a computer&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 133'
[iSCSI target]: #server-storage 'iSCSI target&#10;receives SCSI commands from the initiator and passes them to a storage device, represented by a logical unit number (LUN)&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 134'
[HBA]: #server-storage 'host bus adapter (HBA)&#10;hardware iSCSI initiator, taking the form of an expansion card that includes the functionality of a SCSI host adapter and a Gigabit Ethernet network adapter in one device&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 134'

[iSNS]: #server-storage 'Internet Storage Name Service (iSNS)&#10;Registers the presence of iSCSI initiators and targets on a network and responds to queries from iSNS clients&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 140'
[CNA]: #server-storage 'Converged Network Adapter (CNA)&#10;Combination device that includes Ethernet networking capabilities, a SAN host bus adapter supporting iSCSI, FCoE, or a combination of SAN types.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 143'
[traffic class]: #server-storage 'traffic class&#10;separate types of traffic on a converged network&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 144'
[PFC]: #server-storage 'Priority-based Flow Control (PFC)&#10;method of regulating network traffic to provide lossless data transmissions, as defined by one of the DCB standards&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 145'
[MPIO]: #server-storage 'Multipath I/O (MPIO)&#10;Windows Server 2016 feature that enables a server connected to iSCSI, Fibre Channel, or SAS SAN devices to revert to an alternate path through the network when a connection fails&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 145'

[asymmetric cluster]: #server-storage 'asymmetric cluster&#10;Also "stretch cluster", cluster nodes are divided between two sites, each with its own storage.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 149'

[Storage Spaces][Storage Spaces] can create **storage pools** spanning many drives, from which **virtual disks** can be formed.
Fault tolerance of a storage space can be improved by choosing between [Simple][Simple fault tolerance], [Parity][Parity fault tolerance], or [Mirror][Mirror fault tolerance] **layout options**.
Mirror provides better read/write performance than parity.
Individual physical disks can also be configured as [hot spares][hot spare].
If the virtual disk is formatted as **[ReFS][ReFS]**, it can be [thinly provisioned][thinly provisioned] as well.
Storage Spaces also has a featured called [tiered storage][tiered storage], which allows higher-performance devices to be reserved for more commonly used files.

Most modern SANs are based on [iSCSI][iSCSI], and iSCSI devices are of two types: [initiators][iSCSI initiator] that receive I/O requests from the operating system and [targets][iSCSI target] that receive SCSI commands and pass them to storage devices.
Windows Server 2016 includes the **iSCSI Target Server** role service, which allows a drive on one server to be designated as target to the initiator (installed by default) on another computer.
[iSNS][iSNS] facilitates the connection between initiator and target and sees the most use in enterprise networks.
iSNS architecture consists of a **server**, **database**, **clients**, and the **iSNS Protocol (ISNSP)**.

Because the collisions that are typical in Ethernet networks drastically affect the performance of SANs, their traffic is usually isolated from that of other networks.
Windows Server 2016 includes [DCB][DCB] as an installable feature, although a server must have [compatible hardware][CNA].
You can [configure][New-NetQosTrafficClass] up to 8 total [traffic classes][traffic class], and a [PFC][PFC] [for each][Enable-NetQosFlowControl].
[Multipath I/O][MPIO] is an installable feature that requires redundant network components and a device specific module (DSM) on every network adapter or host bust adapter that connects to the SAN.

[Storage Replica][Storage Replica] supports one-way replication between standalone servers, between clusters, and between storage devices within an [**asymmetric (stretch) cluster**][asymmetric cluster].
- **Synchronous** replication is possible when the replicated volumes can mirror data immediately, ensuring no data loss in case of failover
- **Asynchronous** replication is preferable when the replication partner is located over a WAN link

Storage Replica improves on DFS Replication, which is exclusively asynchronous and file-based, by using SMBv3 (port 445).
Storage Replica requires two virtual disks, one for logs and one for data, which are the same size for each replication partner, and all the physical disks must use the same sector size.
#### Data deduplication
[Data deduplication]: # 'Data deduplication&#10;role service in Windows Server 2016 that conserves storage space on an NTFS volume by locating redundant data and storing only one copy of that data instead of multiple copies; ReFS support was introduced with Windows Server version 1709&#10;Data deduplication replaces the earlier Single Instance Store (SIS) technology in earlier versions of Windows Server.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 155'
[chunk store]: # 'chunk store&#10;separate area of the disk where unique chunks are kept&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 158'
[reparse point]: # 'reparse point&#10;special tag that replaces the location of a chunk that already exists in the store&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 158'
[churn]: # 'churn&#10;accumulation of unoptimized files due to the workload of the volume&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 158'
[garbage collection]: # 'garbage collection&#10;job that searches the chunk store for chunks that no longer have reparse points associatd with them, typically due to modified or deleted files&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 158'
[integrity scrubbing]: # 'integrity scrubbing&#10;job that searches for damage or corruption in the chunk store, replacing missing data with mirror or parity data&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 158'
[unoptimization]: # 'unoptimization&#10;job that restores all of the optimized files on a volume to their original states, disabling Data Deduplication for that volume in the process&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 159'

[Data deduplication][Data deduplication], once [installed][Install-WindowsFeature], runs as a low-priority background process when the system is idle, by default; however its behavior can be [configured][Enable-DedupVolume] based on its intended usage.
Deduplication works by scanning files, and breaking them into unique **chunks** of various sizes that are collected in a [chunk store][chunk store].
The original locations of chunks are replaced by [reparse points][reparse point].
When a file is recently written, it is written in the standard, unoptimized form; the accumulation of such files is known as [churn][churn].
Other jobs associated with deduplication include [garbage collection][garbage collection], [integrity scrubbing][integrity scrubbing], and (when disabling deduplication) [unoptimization][unoptimization].

Deduplication is especially useful for disk drive backups, since snapshots typically differ little from each other.
### Hyper-V
#### Hyper-V configuration
[Hyper-V]: # 'Hyper-V&#10;Windows Server 2016 role and Type 1 Hypervisor&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 165'
[partition]: # 'partition&#10;individual environments created by hypervisor, each of which has its own operating system installed and accesses the computer\'s hardware via the hypervisor&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 167'
[Sconfig]: # 'Sconfig&#10;script-based configuration interface for Hyper-V Server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 168'
[explicit remoting]: # 'explicit remoting&#10;opening a temporary or persistent Powershell session to a remote system&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 176'
[implicit remoting]: # 'implicit remoting&#10;running a cmdlet specifying the `ComputerName` parameter, which directs its function to the remote system&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 177'
[PowerShell Direct]: # 'PowerShell Direct&#10;a means of connecting to a Hyper-V guest operating system from the host operating system, using a PowerShell session&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 180'
[Nested virtualization]: # 'Nested virtualization&#10;ability to configure a Hyper-V guest VM to function as a Hyper-V host&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 181'
[CredSSP]: #hyper-v-configuration 'Credential Security Support Provider (CredSSP)&#10;Authentication protocol used as an alternative to Kerberos when trying to establish a Powershell remoting session between two hosts not in the same domain or forest.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 176'

[Hyper-V][Hyper-V] is a Type I hypervisor and role that allows a Windows Server 2016 **host** to create VMs, called **guests**.
In Type I virtualization, the hypervisor forms an abstraction layer that interacts directly with the host hardware.
In this model, the individual environments created by the hypervisor, including the host operating system and guest VMs, are called [partitions][partition].

Hyper-V Server, a free product available for download is limited to the command-line Server Core interface, however it does include [`Sconfig`][Sconfig] to aid configuration.

Hyper-V can be managed remotely using the GUI (Hyper-V Manager, `hyper-v-tools`), or Powershell (`hyper-v-powershell`).
Authentication can be via Kerberos or [CredSSP][CredSSP], which must be [enabled](pwsh.md#enable-credssp "Enable CredSSP") on both server and client.
Powershell remoting in turn, can be [explicit][explicit remoting] or [implicit][implicit remoting].
[PowerShell Direct][PowerShell Direct] allows easy remoting to VMs by using the `-VmName` Powershell parameter.

[Nested virtualization][Nested virtualization] is a new capability where a virtual host running Windows Server 2016 on a physical host also running Windows Server 2016 can host nested VMs, after some [configuration](pwsh.md#implement-nested-virtualization "Implement nested virtualization").
#### VM configuration
[Dynamic memory]: #vm-configuration 'Dynamic memory&#10;Hyper-V feature that automatically allocates memory to and deallocates it from VMs as needed&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 186'
[NUMA]: #vm-configuration 'Non-Uniform Memory Access (NUMA)&#10;system architecture used to increase memory efficiency in computers with multiple processors by dividing logical processors and memory into NUMA nodes, with each node containing one or more logical processors and the region of memory closest to them&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 189'
[NUMA ratio]: #vm-configuration 'NUMA ratio&#10;difference between accessing local and remote memory for any processor&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 189'
[Smart paging]: #vm-configuration 'Smart paging&#10;Hyper-V feature that enables the host server to compensate when its memory is overcommitted by using disk space for memory paging only during the boot sequence&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 192'
[Resource metering]: #vm-configuration 'Resource metering&#10;Hyper-V feature that makes it possible to track the resources a VM uses as it operates&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 193'
[DDA]: #vm-configuration 'Discrete Device Assignment (DDA)&#10;Hyper-V feature that enables passthrough of any PCI Express device, including GPUs or network adapters&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 212'
[Integration Services]: #vm-configuration 'Integration Services&#10;software package containing drivers and other components that runs on a guest operating system, enabling it to communicate with the Hyper-V host server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 195'
[LIS]: #vm-configuration 'Linux Integration Services (LIS)&#10;Linux driver for Hyper-V specific devices&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 204'
[Secure Boot]: #vm-configuration 'Secure Boot&#10;UEFI feature that ensures components loaded during the boot sequence have been digitally signed, and therefore trusted by the computer manufacturer&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 205'
[Enhanced session mode]: # 'Enhanced session mode&#10;Hyper-V feature available when the host and guest are both running a recent version of Windows, whereby a VM being accessed through VMConnect can utilize resources on the host.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 200'

VMs are associated with a variety of file type including XML-format VM configuration (.vmc), virtual hard disk (.vhd and .vhdx), and saved-state (.vsv) files.
VMs can be [created][New-VM] in Hyper-V, and a machine's RAM can even be [changed][Set-VMMemory] [dynamically][Dynamic memory].

Hyper-V guests can take advantage a suite of features to enhance performance and functionality.
- Virtualization of [NUMA][NUMA] architecture
- [Smart paging][Smart paging] for when VMs that use dynamic memory restart and temporarily need more memory than is available on the host, for example at boot
- [Monitoring][resource metering] resource usage, to minimize cost overruns when guests run in the cloud
- Disk and GPU passthrough, and other PCI-x devices, with [DDA][DDA] <sup>[pwsh](pwsh.md#implement-dda)</sup>
- [Increased performance][Enhanced session mode] of interactive sessions that use [VMConnect][VMConnect.exe]

Microsoft supports some Linux distributions, like Ubuntu, with built-in [Linux][LIS] [Integration Services][Integration Services], which improve performance by providing custom drivers to interface with Hyper-V.
Some distributions like CentOS and Oracle come with integrated LIS packages, but free LIS packages provided by Microsoft for download from the Microsoft Download Center support additional features and come with the additional benefit of being versioned.
These packages are provided as tarballs or ISO images, and must be loaded directly into the running guest operating system.
FreeBSD has included full support for FreeBSD Integration Services (BIS) since version 10.

[Secure Boot][Secure Boot] has to be disabled when loading Hyper-V VMs running Linux distributions, since UEFI does not have certificates for non-Windows operating systems by default. 
Some distributions supported by Microsoft do have certificates in the [UEFI Certificate Authority][Set-VMFirmware].

Different versions of Hyper-V create VMs associated with that version (Windows Server 2016 uses Hyper-V 8.0).
VMs created by older versions of Hyper-V can be [updated][Update-VMVersion], but once updated they may no longer run on a host of a previous version.

Importing an exported VM can be done in three ways: 
- **Register**: exported files are left as-is and the guest's ID is maintained; 
- **Restore**: exported files copied to the host's default locations or ones that are otherwise specified; ID is maintained
- **Copy**: exported files are copied; new ID generated
#### Hyper-V storage
#### Hyper-V networking
<!-- Concepts -->
[external virtual switch]: #hyper-v-networking 'external virtual switch&#10;bound to networking protocol stack in the host operating system and connected to a physical network interface adapter on the host, allowing VMs to access the network to which the physical adapter is connected&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 241'
[internal virtual switch]: #hyper-v-networking 'internal virtual switch&#10;Bound to a separate instance of the networking protocol stack in the host operating system, independent from the physical network interface adapter and its connected network, it allows VMs to access the virtual network, including the host operating system.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 241'
[legacy network adapter]: #hyper-v-networking 'legacy network adapter&#10;Also "emulated network adapter", one of two types of virtual network adapter supported by Generation 1 VMs in Hyper-V, which makes calls directly to the hypervisor.&#10;Generation 1 VMs could not boot from PXE without a legacy network adapter, however their performance is worse than that of synthetic network adapters.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 248'
[Microsoft Network Adapter Multiplexor Driver]: #hyper-v-networking 'Microsoft Network Adapter Multiplexor Driver&#10;Network component installed after configuring a NIC team in Window Server 2016&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 249'
[private virtual switch]: #hyper-v-networking 'private virtual switch&#10;Exists only in the Hyper-V server and is accessible only to the VMs running on it, and is inaccessible to the host operating system itself.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 241'
[RDMA]: #hyper-v-networking 'Remote Direct Memory Access (RDMA)&#10;network adapter technology and network transmission method that can send large amounts of data with low latency and without processor intervention&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 253'
[SET]: #hyper-v-networking 'Switch Embedded Teaming (SET)&#10;Hyper-V-only variation of NIC teaming that is implemented wholly within a virtual switch&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 253'
[synthetic network adapter]: #hyper-v-networking 'synthetic network adapter&#10;One of two types of virtual network adapter supported by Generation 1 VMs in Hyper-V, which does not correspond to a real-world product.&#10;Hyper-V synthetic network adapters communicate with the host operating system through the VMBus&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 247'
[VMQ]: #hyper-v-networking 'Virtual Machine Queue (VMQ)&#10;Network performance enhancement feature enabled by Windows Server 2016 automatically when it detects physical network adapters that run at 10 Gbps or faster. &#10;Physical network adapter that support VMQ filters inbound packets based on the destination address and then forwards queues for each to the host operating system&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 251'

<!-- Powershell cmdlets-->
[Enable-NetAdapterRdma]: #enable-netadapterrdma '```&#10;PS C:\> Enable-NetAdapterRdma&#10;```&#10;Enable RDMA on adapters&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 254'
[Enable-NetAdapterVmq]: #enable-netadaptervmq '```&#10;PS C:\> Enable-NetAdapterVmq&#10;```&#10;Enable VMQ on a specific adapter&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 252'
[Get-NetAdapterRdma]: #get-netadapterrdma '```&#10;PS C:\> Get-NetAdapterRdma&#10;```&#10;Display the current RDMA status of network adapters&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 254'
[Get-NetAdapterVmq]: #get-netadaptervmq '```&#10;PS C:\> Get-NetAdapterVmq&#10;```&#10;Discover whether physical network adapters support VMQ&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 252'
[Get-NetAdapterVmqQueue]: #get-netadaptervmqqueue '```&#10;PS C:\> Get-NetAdapterVmqQueue&#10;```&#10;See which VMQ queries are assigned to which processors&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 252'
[Set-NetAdapterVmq]: #set-netadaptervmq '```&#10;PS C:\> Set-NetAdapterVmq&#10;```&#10;Modify default VMQ settings&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 253'

Virtual switches can be [external][external virtual switch], [internal][internal virtual switch], or [private][private virtual switch] (in order of decreasing access).
Up to 8 network adapters can be [added][Add-VMNetworkAdapter] to a Windows Server 2016 Hyper-V VM.

Hyper-V maintains a pool of MAC addresses which are assigned to virtual network adapters as they are created.
Hyper-V MAC addresses begin with `00-15-5D`, followed by the last two bytes of the IP address assigned to the server's physical network adapter (i.e. last two octets), then a final byte.

Generation 1 VMs supported [synthetic][synthetic network adapter] and [legacy][legacy network adapter] virtual network adapters, but in Generation 2 VMs only synthetic adapters are used.
Generation 1 VMs can only boot from network (PXE) when using a legacy adapter.

Physical hosts running Windows Server 2016 can support teams of up to 32 NICs, but Hyper-V VMs are limited to teams of two.
The team must first be configured in the host operating system and appears as a single [interface][Microsoft Network Adapter Multiplexor Driver] in the Virtual Switch Manager.
High-performance [embedded teaming][SET], reliant on [RDMA][RDMA], can only be configured with [Powershell](pwsh.md#create-a-virtual-switch-with-set-enabled).

[Virtual machine queuing][VMQ] will enhance performance if a physical host [supports][Get-NetAdapterVmq] it and it is [enabled][Enable-NetAdapterVmq].

Bandwidth management is achieved by setting limits on the virtual network adapter, in the GUI or in [Powershell][Set-VMNetworkAdapter].
### Windows containers
#### Container deployment
Containers run applications in an **isolated namespace**, meaning it only has access to resources that are made available to it by the container runtime.
**Resource governance** means that a container has access only to a specified number of processor cycles, system memory, and other resources.
Containers allow applications to be packaged with their dependencies in **container images**, which will run the same regardless of underlying operating system or infrastructure and are downloaded from **container registries** like **Docker Hub**.
Container registries are not to be confused with **repositories**, which are subcomponents of registries.
Windows Server 2016 suports **Windows Server Containers** and **Hyper-V Containers**, which create a separate copy of the operating system kernel for each container.

The "Containers" feature must be installed on Windows Server 2016 hosts, and to create Hyper-V containers the Hyper-V role must also be installed (although the Hyper-V management tools are not necessary if VMs are not going to created).

Nano Server once could serve as Docker hosts, but no longer; Nano Servers are now intended to be deployed as containers themselves.
The [Powershell Docker module](https://github.com/microsoft/Docker-PowerShell "PowerShell for Docker") has been deprecated for years.

#### Container management
### Clusters
#### High availability
[Hyper-V Replica]: #high-availability 'Hyper-V Replica&#10;feature of the Hyper-V role that allows creation of a replica of VMs on a Hyper-V server to another server, locally or remote&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 297'
[replica server]: #high-availability 'replica server&#10;term used to designate the destination server in a failover solution&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 299'

[Shared Nothing Live Migration]: #high-availability 'Shared Nothing Live Migration&#10;migration of VM data, memory, and system state to another host&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 307'
[Live Migration]: #high-availability 'Live Migration&#10;migration of VM state and live memory contents to another host, but not its data&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 303'
[Storage Migration]: #high-availability 'Storage Migration&#10;migration of VM virtual hard disk files to another host, but not its memory and system state&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 371'

To configure a simple failovers solution using [Hyper-V Replica][Hyper-V Replica], configure the server as a [replica][replica server], specify authentication type (HTTP via Kerberos or HTTPS), and specify authorization option. <sup>[pwsh][Set-VMReplicationServer]</sup>
Finally enable appropriate firewall rule, depending on authentication type chosen. <sup>[pwsh][Enable-NetFirewallRule]</sup>
On the VM that will be replicated, you have to configure options through the Enable Replication wizard.

Migrations can take place one of three methods:

[Live Migration][Live Migration] works by first creating an unpopulated VM on the destination with the same resources as the source before transferring memory pages. 
Once the servers have an identical memory state, the source VM is suspended and the destination takes over. 
Hyper-V  notifies the network switch of the change, diverting network traffic to the destination. 
When a Hyper-V cluster is created, the Failover Cluster Manager launches the High Availability Wizard, which configures the VM to support Live Migration. <sup>[pwsh][Add-ClusterVirtualMachineRole]</sup> 
Hyper-V hosts that are not clustered can still perform live migrations, but they must be part of the same (or trusted) domains.

[Shared Nothing Live Migration][Shared Nothing Live Migration] requires that source and destination VMs be members of the same (or trusted) domain, and source and domain servers must be running the same processor family (Intel or AMD) and linked by an Ethernet network running a minimum of 1 Gbps. 
Additionally, both Hyper-V hosts must be running idential virtual switches that use the same name; otherwise the migration process will be interrupted to prompt the operator to select a switch on the destination server. 
The process of migrating is almost identical to a Live Migration, except that you select the "Move the Virtual Machine's Data To a Single Location" option on the Choose Move Options page of the Move Wizard.

[Storage Migration][Storage Migration] works by first creating new VHDs on the destination corresponding to those on the source server.
While the source server continues to operating using local files, Hyper-V begins mirroring disk writes to the destination server and begins a single-pass copy of the source disks to the destination begins, skipping blocks that have already been copied.
Once the copy has completed, the VM begins working from the destination server and the source files are deleted.
For a VM that is shut off, storage migration is equivalent to simply copying files from source to destination.
#### Failover clustering
[failover cluster]: #high-availability 'failover cluster&#10;group of two or more computers, physical or virtual, running the same application that functions as a single entity to provide high availability, scalability, and fault tolerance&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 311'
[CNO]: #failover-clustering 'cluster name object (CNO)&#10;Computer object in Active Directory associated with a failover cluster&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 313'
[SoFS]: # 'Scale-Out File Server (SoFS)&#10;clustered role that is designed to provide highly available storage for applications, like Hyper-V and SQL Server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 337'
[Add-ClusterScaleOutFileServer]: #add-clusterscaleoutfileserver '```&#10;PS C:\> Add-ClusterScaleOutFileServer&#10;```&#10;Install the Scale-out File Server role&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 339'
[guest failover cluster]: #failover-clustering 'guest failover cluster&#10;consists solely of VMs running on a single Hyper-V host server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 341'
[witness]: #high-availability 'witness&#10;resource that casts a vote for the continued operation of a cluster&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 318'
[quorum]: #high-availability 'quorum&#10;provides each node and witness in a cluster with a vote, to prevent a cluster from developing split-brain&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 317'
[Active Directory-detached cluster]: #high-availability 'Active Directory-detached cluster&#10;Cluster whose nodes are joined to a domain but which is not associated with a cluster name object (CNO) in AD&#10;In such a cluster, the name of the cluster and nodes must be registered in DNS, but the nodes still must be joined to an AD DS domain.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 337'

A [failover cluster][failover cluster] can be single-domain, multi-domain, or workgroup clusters, depending on how or if the servers are joined to domains.
A cluster whose servers are joined to a single domain is typically associated with a [cluster name object][CNO] in Active Directory, which is called its **administrative access point**.
Some applications also create similar objects called **virtual computer objects (VCO)**, client access points.
A cluster can also be configured to be [detached][Active Directory-detached cluster] from AD, even though its nodes are joined, using the [`-AdministrativeAccessPoint dns`][New-Cluster] parameter.

A single-domain cluster can use AD to provide access to all nodes, but in its absence the same local user account with the same username and password must be created on every node and added to Administrators.
The builtin Administrator account can work, but if a different account is used then a new Registry key must be [created][New-ItemProperty] on each node.

Three types of [witness][witness] resources can help to ensure a [quorum][quorum] takes place in clusters. A witness is created when a cluster has an even number of nodes, and only one can be configured. <sup>[pwsh][Set-ClusterQuorum]
- **Disk witness**: dedicated disk in shared storage that contains a copy of the cluster database
- **File Share witness**: SMB file share containing a Witness.log file with information about the cluster
- **Cloud witness**: blob stored in Azure

The [Scale-out File Server (SoFS)][SoFS] role is specifically recommended for use on Hyper-V and SQL Server clusters and can be installed with [`Add-ClusterScaleOutFileServer`][Add-ClusterScaleOutFileServer].
A [guest cluster][guest failover cluster] is good for learning about failover clustering.

VM resiliency can be configured by adjusting settings in response to changes in VM state:
- **Unmonitored**: VM owning a role is not being monitored by the Cluster Service
- **Isolated**: Node is not currently an active member of the cluster, but still possess the role
- **Quarantine**: Node has been drained of its roles and removed from the cluster for a specified length of time.
#### Storage Spaces Direct
[hyper-converged S2D scenario]: # 'hyper-converged S2D scenario&#10;combines S2D with Hyper-V in a single cluster&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 357'
[disaggregated S2D scenario]: # 'disaggregated S2D scenario&#10;has two distinct clusters: a Scale-out File Server cluster that uses S2D to provide the storage for the second, a Hyper-V cluster hosting VMs&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 355'

The recommended drive configuration for a node in an S2D cluster is a minimum of six drives, with at least 2 SSDs and at least 4 HDDs, with no RAID or other intelligence that cannot be disabled.
These disks must be initialized (typically using GPT), but **unpartitioned**.

Microsoft defined two deployment scenarios for [Storage Spaces Direct (S2D)][S2D]: [hyper-converged][hyper-converged S2D scenario] and [disaggregated][disaggregated S2D scenario].
The disaggregated scenario requires the [DCB][DCB] role for traffic management.
At least two 10Gbps Ethernet adapters are recommended per node, preferably adapters that use RDMA.

Creating a S2D cluster in Powershell requires the use of the [`-NoStorage`][New-Cluster] parameter, because you must prevent the system from automatically detecting and adding storage. <sup>[pwsh](pwsh.md#configure-s2d-cluster "Create a S2D cluster")</sup>
#### Moving cluster VMs
[quick migration]: #moving-cluster-vms 'quick migration&#10;move a running or stopped VM after what is usually a brief pause by first copying the memory of the VM to disk and then from the disk to the destination&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 370'

VMs can be moved from node to node of a cluster using [live][Live Migration], [storage][Storage Migration], or [quick][quick migration] migrations.
#### NLB
[drain on shutdown]: #nlb 'drain on shutdown&#10;feature of Windows Server 2016 Failover Clustering which automatically live migrates all roles on a node before shutting down the system&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 374'

Cluster VMs can be configured to [move][drain on shutdown] their workloads to other nodes when being shutdown using `Suspend-ClusterNode`
### Maintenance and monitoring
#### Maintenance
#### Monitoring
## Powershell
[Add-ClusterSharedVolume]: pwsh.md#add-clustersharedvolume '```&#10;PS C:\> Add-ClusterSharedVolume&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 153'
[Add-ClusterVMMonitoredItem]: pwsh.md#add-clustervmmonitoreditem '```&#10;PS C:\> Add-ClusterVMMonitoredItem&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 362'
[Add-ClusterVirtualMachineRole]: pwsh.md#add-clustervirtualmachinerole '```&#10;PS C:\> Add-ClusterVirtualMachineRole&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 304'
[Add-Computer]: pwsh.md#add-computer '```&#10;PS C:\> Add-Computer&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 20'
[Add-ContainerImageTag]: pwsh.md#add-containerimagetag '```&#10;PS C:\> Add-ContainerImageTag&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 272'
[Add-VMNetworkAdapter]: pwsh.md#add-vmnetworkadapter '```&#10;PS C:\> Add-VMNetworkAdapter&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 237'
[Attach-Container]: pwsh.md#attach-container '```&#10;PS C:\> Attach-Container&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 280'
[Block-SmbShareAccess]: pwsh.md#block-smbshareaccess '```&#10;PS C:\> Block-SmbShareAccess&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 109'
[Close-SmbOpenFile]: pwsh.md#close-smbopenfile '```&#10;PS C:\> Close-SmbOpenFile&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 108'
[Close-SmbSession]: pwsh.md#close-smbsession '```&#10;PS C:\> Close-SmbSession&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 107'
[Compare-VM]: pwsh.md#compare-vm '```&#10;PS C:\> Compare-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 212'
[Convert-VHD]: pwsh.md#convert-vhd '```&#10;PS C:\> Convert-VHD&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 228'
[ConvertTo-ContainerImage]: pwsh.md#convertto-containerimage '```&#10;PS C:\> ConvertTo-ContainerImage&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 280'
[Copy-Item]: pwsh.md#copy-item '```&#10;PS C:\> Copy-Item&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 180'
[Dismount-VHD]: pwsh.md#dismount-vhd '```&#10;PS C:\> Dismount-VHD&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 92'
[Edit-NanoServerImage]: pwsh.md#edit-nanoserverimage '```&#10;PS C:\> Edit-NanoServerImage&#10;```&#10;Add a role or feature to an existing Nano Server VHD file&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 49'
[Enable-DedupVolume]: pwsh.md#enable-dedupvolume '```&#10;PS C:\> Enable-DedupVolume&#10;```&#10;&#10;Enable deduplication for a volume&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 157'
[Enable-NetFirewallRule]: pwsh.md#enable-netfirewallrule '```&#10;PS C:\> Enable-NetFirewallRule&#10;```&#10;Enable a previously disabled Windows Firewall rule'
[Enter-ContainerSession]: pwsh.md#enter-containersession '```&#10;PS C:\> Enter-ContainerSession&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 280'
[Enter-PsSession]: pwsh.md#enter-pssession '```&#10;PS C:\> Enter-PsSession&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 22'
[Exit-PsSession]: pwsh.md#exit-pssession '```&#10;PS C:\> Exit-PsSession&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 177'
[Export-VM]: pwsh.md#export-vm '```&#10;PS C:\> Export-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 210'
[Format-List]: pwsh.md#format-list '```&#10;PS C:\> Format-List&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 161'
[Get-Command]: pwsh.md#get-command '```&#10;PS C:\> Get-Command&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 21'
[Get-ComputerInfo]: pwsh.md#get-computerinfo '```&#10;PS C:\> Get-ComputerInfo&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 274'
[Get-Container]: pwsh.md#get-container '```&#10;PS C:\> Get-Container&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 280'
[Get-DedupStatus]: pwsh.md#get-dedupstatus '```&#10;PS C:\> Get-DedupStatus&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 161'
[Get-Help]: pwsh.md#get-help '```&#10;PS C:\> Get-Help&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 21'
[Get-NetAdapterVmqQueue]: pwsh.md#get-netadaptervmqqueue '```&#10;PS C:\> Get-NetAdapterVmqQueue&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 252'
[Get-NetAdapter]: pwsh.md#get-netadapter '```&#10;PS C:\> Get-NetAdapter&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 19'
[Get-SRGroup]: pwsh.md#get-srgroup '```&#10;PS C:\> Get-SRGroup&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 154'
[Get-SmbClientConfiguration]: pwsh.md#get-smbclientconfiguration '```&#10;PS C:\> Get-SmbClientConfiguration&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 111'
[Get-SmbOpenFile]: pwsh.md#get-smbopenfile '```&#10;PS C:\> Get-SmbOpenFile&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 108'
[Get-SmbServerConfiguration]: pwsh.md#get-smbserverconfiguration '```&#10;PS C:\> Get-SmbServerConfiguration&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 109'
[Get-SmbSession]: pwsh.md#get-smbsession '```&#10;PS C:\> Get-SmbSession&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 107'
[Get-SmbShareAccess]: pwsh.md#get-smbshareaccess '```&#10;PS C:\> Get-SmbShareAccess&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 108'
[Get-VMHostSupportedVersion]: pwsh.md#get-vmhostsupportedversion '```&#10;PS C:\> Get-VMHostSupportedVersion&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 209'
[Get-VM]: pwsh.md#get-vm '```&#10;PS C:\> Get-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 177'
[Get-WindowsFeature]: pwsh.md#get-windowsfeature '```&#10;PS C:\> Get-WindowsFeature&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 15'
[Grant-SRAccess]: pwsh.md#grant-sraccess '```&#10;PS C:\> Grant-SRAccess&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 153'
[Grant-SmbShareAccess]: pwsh.md#grant-smbshareaccess '```&#10;PS C:\> Grant-SmbShareAccess&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 109'
[Import-VM]: pwsh.md#import-vm '```&#10;PS C:\> Import-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 211'
[Install-WindowsFeature]: pwsh.md#install-windowsfeature '```&#10;PS C:\> Install-WindowsFeature&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 15, 171, 225, 377'
[Invoke-Command]: pwsh.md#invoke-command '```&#10;PS C:\> Invoke-Command&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 180'
[Measure-VM]: pwsh.md#measure-vm '```&#10;PS C:\> Measure-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 194, 234-235'
[Merge-VHD]: pwsh.md#merge-vhd '```&#10;PS C:\> Merge-VHD&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 228'
[Mount-DiskImage]: pwsh.md#mount-diskimage '```&#10;PS C:\> Mount-DiskImage&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 92'
[Mount-VHD]: pwsh.md#mount-vhd '```&#10;PS C:\> Mount-VHD&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 92'
[New-Cluster]: pwsh.md#new-cluster '```&#10;PS C:\> New-Cluster&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 337'
[New-Container]: pwsh.md#new-container '```&#10;PS C:\> New-Container&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 275, 280'
[New-NanoServerImage]: pwsh.md#new-nanoserverimage '```&#10;PS C:\> New-NanoServerImage&#10;New-NanoServerImage -DeploymentType guest|host -Edition standard|datacenter -MediaPath root -TargetPath $PATH -ComputerName $NAME&#10;```&#10;Used to create a Nano Server VHD file for Nano Server installation&#10;Required parameters:&#10;  `DeploymentType` specified whether the image file should be used on a Hyper-V VM ("Guest") or a physical server ("Host")&#10;  `Edition` specifies whether to install the Standard or Datacenter edition of Nano Server&#10;  `MediaPath` specifies the path to the root of the WS2016 installation disk or mounted image&#10;  `BasePath` specifies a path on the local system where the cmdlet creates a copy of the installation files from the location specified in `MediaPath`&#10;  `TargetPath` specifies the full path and filename of the new image to be created with the filename extension (".vhd" or ".vhdx") specifying Generation 1 or Generation 2 image.&#10;  `ComputerName` specifies the computer name that should be assigned to the new image&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 44'
[New-NetIpAddress]: pwsh.md#new-netipaddress '```&#10;PS C:\> New-NetIpAddress&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 19'
[New-NetQosPolicy]: pwsh.md#new-netqospolicy '```&#10;PS C:\> New-NetQosPolicy&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 144'
[New-NetQosTrafficClass]: pwsh.md#new-netqostrafficclass '```&#10;PS C:\> New-NetQosTrafficClass&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 144'
[New-PsSession]: pwsh.md#new-pssession '```&#10;PS C:\> New-PsSession&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 21'
[New-SRPartnership]: pwsh.md#new-srpartnership '```&#10;PS C:\> New-SRPartnership&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 151'
[New-SmbShare]: pwsh.md#new-smbshare '```&#10;PS C:\> New-SmbShare&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 106'
[New-VHD]: pwsh.md#new-vhd '```&#10;PS C:\> New-VHD&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 90, 219, 223'
[New-VM]: pwsh.md#new-vm '```&#10;PS C:\> New-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 47, 184, 197'
[Optimize-VM]: pwsh.md#optimize-vm '```&#10;PS C:\> Optimize-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 228'
[Remove-ContainerImage]: pwsh.md#remove-containerimage '```&#10;PS C:\> Remove-ContainerImage&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 273'
[Remove-Container]: pwsh.md#remove-container '```&#10;PS C:\> Remove-Container&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 281'
[Remove-SmbShare]: pwsh.md#remove-smbshare '```&#10;PS C:\> Remove-SmbShare&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 108'
[Reset-VMResourceMetering]: pwsh.md#reset-vmresourcemetering '```&#10;PS C:\> Reset-VMResourceMetering&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 195'
[Revoke-SmbShareAccess]: pwsh.md#revoke-smbshareaccess '```&#10;PS C:\> Revoke-SmbShareAccess&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 109'
[Set-Disk]: pwsh.md#set-disk '```&#10;PS C:\> Set-Disk&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 226'
[Set-DnsClientServerAddress]: pwsh.md#set-dnsclientserveraddress '```&#10;PS C:\> Set-DnsClientServerAddress&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 20'
[Set-FileStorageTier]: pwsh.md#set-filestoragetier '```&#10;PS C:\> Set-FileStorageTier&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 133'
[Set-Item]: pwsh.md#set-item '```&#10;PS C:\> Set-Item&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 56'
[Set-NetAdapterVmq]: pwsh.md#set-netadaptervmq '```&#10;PS C:\> Set-NetAdapterVmq&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 253'
[Set-NetQoSbcdxSetting]: pwsh.md#set-netqosbcdxsetting '```&#10;PS C:\> Set-NetQoSbcdxSetting&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 143'
[Set-SRPartnership]: pwsh.md#set-srpartnership '```&#10;PS C:\> Set-SRPartnership&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 155'
[Set-SmbPathAcl]: pwsh.md#set-smbpathacl '```&#10;PS C:\> Set-SmbPathAcl&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 340'
[Set-SmbServerConfiguration]: pwsh.md#set-smbserverconfiguration '```&#10;PS C:\> Set-SmbServerConfiguration&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 109'
[Set-VMFirmware]: pwsh.md#set-vmfirmware '```&#10;PS C:\> Set-VMFirmware&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 208'
[Set-VMMemory]: pwsh.md#set-vmmemory '```&#10;PS C:\> Set-VMMemory&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 185'
[Set-VMNetworkAdapter]: pwsh.md#set-vmnetworkadapter '```&#10;PS C:\> Set-VMNetworkAdapter&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 255'
[Set-VMReplicationServer]: pwsh.md#set-vmreplicationserver '```&#10;PS C:\> Set-VMReplicationServer&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 300'
[Set-VM]: pwsh.md#set-vm '```&#10;PS C:\> Set-VM&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 231'
[Start-DscConfiguration]: pwsh.md#start-dscconfiguration '```&#10;PS C:\> Start-DscConfiguration&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 27'
[Test-SRTopology]: pwsh.md#test-srtopology '```&#10;PS C:\> Test-SRTopology&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 152'
[Unblock-SmbShareAccess]: pwsh.md#unblock-smbshareaccess '```&#10;PS C:\> Unblock-SmbShareAccess&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 109'
[Update-VMVersion]: pwsh.md#update-vmversion '```&#10;PS C:\> Update-VMVersion&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 209'
[Set-VmReplicationServer]: pwsh.md#set-vmreplicationserver '```&#10;PS C:\> Set-VmReplicationServer&#10;```&#10;Configure a host as a Replica server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 300'
[Update-VMVersion]: #update-vmversion '```&#10;PS C:\> Update-VMVersion&#10;```&#10;Updates the version of virtual machines.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 209'

<!-- Failover clustering cmdlets -->
[Add-ClusterDisk]: pwsh.md#add-clusterdisk '```&#10;PS C:\> Add-ClusterDisk&#10;```&#10;Allow an admin to add a new disk to a failover cluster'
[Add-ClusterFileServerRole]: pwsh.md#add-clusterfileserverrole '```&#10;PS C:\> Add-ClusterFileServerRole&#10;```&#10;This command allows an admin to create a clustered file server'
[Add-ClusterGenericApplicationRole]: pwsh.md#add-clustergenericapplicationrole '```&#10;PS C:\> Add-ClusterGenericApplicationRole&#10;```&#10;Configures an application in the generic application role, providing high availability for an application not designed for use in a failover cluster.'
[Add-ClusterGroup]: pwsh.md#add-clustergroup '```&#10;PS C:\> Add-ClusterGroup&#10;```&#10;Allow an admin to add a resource group to the failover cluster'
[Add-ClusterNode]: pwsh.md#add-clusternode '```&#10;PS C:\> Add-ClusterNode&#10;```&#10;Allow an admin to add a node to a failover cluster'
[Add-ClusterResource]: pwsh.md#add-clusterresource '```&#10;PS C:\> Add-ClusterResource&#10;```&#10;Allow an admin to add a resource to a failover cluster'
[Add-ClusterResourceDependency]: pwsh.md#add-clusterresourcedependency '```&#10;PS C:\> Add-ClusterResourceDependency&#10;```&#10;Add a resource dependency to a failover cluster'
[Add-ClusterScaleOutFileServer]: pwsh.md#add-clusterscaleoutfileserver '```&#10;PS C:\> Add-ClusterScaleOutFileServer&#10;```&#10;Install the Scale-out File Server role&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 339'
[Add-ClusterServerRole]: pwsh.md#add-clusterserverrole '```&#10;PS C:\> Add-ClusterServerRole&#10;```&#10;Add the cluster server role to a server'
[Block-ClusterAccess]: pwsh.md#block-clusteraccess '```&#10;PS C:\> Block-ClusterAccess&#10;```&#10;Block the specified users from accessing a cluster'
[Enable-ClusterStorageSpacesDirect]: #enable-clusterstoragespacesdirect '```&#10;PS C:\> Enable-ClusterStorageSpacesDirect&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 354'
[Get-Cluster]: pwsh.md#get-cluster '```&#10;PS C:\> Get-Cluster&#10;```&#10;Display information about a failover cluster'
[Get-ClusterAccess]: pwsh.md#get-clusteraccess '```&#10;PS C:\> Get-ClusterAccess&#10;```&#10;Display permissions for a failover cluster'
[Get-ClusterNode]: pwsh.md#get-clusternode '```&#10;PS C:\> Get-ClusterNode&#10;```&#10;Display information about the servers in a failover cluster'
[Get-ClusterQuorum]: pwsh.md#get-clusterquorum '```&#10;PS C:\> Get-ClusterQuorum&#10;```&#10;Display cluster quorum in a cluster'
[New-Cluster]: pwsh.md#new-cluster '```&#10;PS C:\> New-Cluster&#10;```&#10;Create a new failover cluster'
[Remove-Cluster]: pwsh.md#remove-cluster '```&#10;PS C:\> Remove-Cluster&#10;```&#10;Remove a failover cluster'
[Remove-ClusterAccess]: pwsh.md#remove-clusteraccess '```&#10;PS C:\> Remove-ClusterAccess&#10;```&#10;Remove user access from the cluster'
[Remove-ClusterNode]: pwsh.md#remove-clusternode '```&#10;PS C:\> Remove-ClusterNode&#10;```&#10;Remove a node from a failover cluster'
[Set-ClusterQuorum]: pwsh.md#set-clusterquorum '```&#10;PS C:\> Set-ClusterQuorum&#10;```&#10;Configures quorum options for a failover cluster.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 318'
[Start-Cluster]: pwsh.md#start-cluster '```&#10;PS C:\> Start-Cluster&#10;```&#10;Start the Cluster service on all nodes'
[Stop-Cluster]: pwsh.md#stop-cluster '```&#10;PS C:\> Stop-Cluster&#10;```&#10;Stop the Cluster service on all nodes'
[Stop-ClusterNode]: pwsh.md#stop-clusternode '```&#10;PS C:\> Stop-ClusterNode&#10;```&#10;Stop the Cluster service on a node'
[Suspend-ClusterNode]: pwsh.md#suspend-clusternode '```&#10;PS C:\> Suspend-ClusterNode&#10;```&#10;Pause the activity of a failover cluster node&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 374'
[Test-Cluster]: pwsh.md#test-cluster '```&#10;PS C:\> Test-Cluster&#10;```&#10;Complete validation tests for a cluster'

<!-- Windows Server Migration Tools-->
[Export-SmigServerSetting]:    pwsh.md#export-smigserversetting       '```&#10;PS C:\> Export-SmigServerSetting&#10;```&#10;Export certain Windows features and operating system settings to a migration store&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 33'
[Get-SmigServerFeature]:       pwsh.md#get-smigserverfeature          '```&#10;PS C:\> Get-SmigServerFeature&#10;```&#10;Display a list of Windows features that can be migrated from the local server or ffrom a migration store&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 33'
[Import-SmigServerSetting]:    pwsh.md#import-smigserversetting       '```&#10;PS C:\> Import-SmigServerSetting&#10;```&#10;Import certain Windows features and operating system settings from a migration store and apply them to the local server&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 33'
[Receive-SmigServerData]:      pwsh.md#receive-smigserverdata         '```&#10;PS C:\> Receive-SmigServerData&#10;```&#10;Enable a destination server to receive migrated files, folders, permissions, and share properties from a source server (`Send-SmigServerData` cmdlet must be running on the source server at the same time)&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 33'
[Send-SmigServerData]:         pwsh.md#send-smigserverdata            '```&#10;PS C:\> Send-SmigServerData&#10;```&#10;Migrate files, folders, permissions, and share properties from a source server to a destination server (`Receive-SmigServerData` cmdlet must be running on the destination server at the same time)&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 33'
[New-NanoServerImage]: pwsh.md#new-nanoserverimage '```&#10;PS C:\> New-NanoServerImage&#10;PS C:\> New-NanoServerImage -DeploymentType guest|host -Edition standard|datacenter -MediaPath root -TargetPath $PATH -ComputerName $NAME&#10;```&#10;Used to create a Nano Server VHD file for Nano Server installation&#10;Required parameters:&#10;  `DeploymentType` specified whether the image file should be used on a Hyper-V VM ("Guest") or a physical server ("Host")&#10;  `Edition` specifies whether to install the Standard or Datacenter edition of Nano Server&#10;  `MediaPath` specifies the path to the root of the WS2016 installation disk or mounted image&#10;  `BasePath` specifies a path on the local system where the cmdlet creates a copy of the installation files from the location specified in `MediaPath`&#10;  `TargetPath` specifies the full path and filename of the new image to be created with the filename extension (".vhd" or ".vhdx") specifying Generation 1 or Generation 2 image.&#10;  `ComputerName` specifies the computer name that should be assigned to the new image&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 44'
[Edit-NanoServerImage]: pwsh.md#edit-nanoserverimage '```&#10;PS C:\> Edit-NanoServerImage&#10;```&#10;Add a role or feature to an existing Nano Server VHD file&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 49'

<!-- DISM.exe equivalents -->
[Add-AppxProvisionedPackage]: pwsh.md#add-appxprovisionedpackage '```&#10;PS C:\> Add-AppxProvisionedPackage&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Add-ProvisionedAppxPackage`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Get-AppxProvisionedPackage]: pwsh.md#get-appxprovisionedpackage '```&#10;PS C:\> Get-AppxProvisionedPackage&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Get-ProvisionedAppxPackages`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Remove-AppxProvisionedPackage]: pwsh.md#remove-appxprovisionedpackage '```&#10;PS C:\> Remove-AppxProvisionedPackage&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Remove-ProvisionedAppxPackage`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Set-AppxProvisionedDataFile]: pwsh.md#set-appxprovisioneddatafile '```&#10;PS C:\> Set-AppxProvisionedDataFile&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Set-ProvisionedAppxDataFile`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Add-WindowsDriver]: pwsh.md#add-windowsdriver '```&#10;PS C:\> Add-WindowsDriver&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Add-Drive`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Add-WindowsImage]: pwsh.md#add-windowsimage '```&#10;PS C:\> Add-WindowsImage&#10;```&#10;&#10;Equivalent to `dism.exe /Append-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Add-WindowsPackage]: pwsh.md#add-windowspackage '```&#10;PS C:\> Add-WindowsPackage&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Add-Package`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Apply-WindowsUnattend]: pwsh.md#apply-windowsunattend '```&#10;PS C:\> Apply-WindowsUnattend&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Apply-Unattend`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Disable-WindowsOptionalFeature]: pwsh.md#disable-windowsoptionalfeature '```&#10;PS C:\> Disable-WindowsOptionalFeature&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Disable-Feature`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Dismount-WindowsImage]: pwsh.md#dismount-windowsimage '```&#10;PS C:\> Dismount-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Unmount-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Enable-WindowsOptionalFeature]: pwsh.md#enable-windowsoptionalfeature '```&#10;PS C:\> Enable-WindowsOptionalFeature&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Enable-Feature`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Expand-WindowsImage]: pwsh.md#expand-windowsimage '```&#10;PS C:\> Expand-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Apply-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Export-WindowsDriver]: pwsh.md#export-windowsdriver '```&#10;PS C:\> Export-WindowsDriver&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Export-Driver`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Export-WindowsImage]: pwsh.md#export-windowsimage '```&#10;PS C:\> Export-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Export-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Get-WindowsDriver]: pwsh.md#get-windowsdriver '```&#10;PS C:\> Get-WindowsDriver&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Get-Drivers`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Get-WindowsImage]: pwsh.md#get-windowsimage '```&#10;PS C:\> Get-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Get-ImageInfo`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Get-WindowsImageContent]: pwsh.md#get-windowsimagecontent '```&#10;PS C:\> Get-WindowsImageContent&#10;```&#10;&#10;Equivalent to `Dism.exe /List-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Get-WindowsOptionalFeature]: pwsh.md#get-windowsoptionalfeature '```&#10;PS C:\> Get-WindowsOptionalFeature&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Get-Features`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Get-WindowsPackage]: pwsh.md#get-windowspackage '```&#10;PS C:\> Get-WindowsPackage&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Get-Packages`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Mount-WindowsImage]: pwsh.md#mount-windowsimage '```&#10;PS C:\> Mount-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Mount-image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[New-WindowsImage]: pwsh.md#new-windowsimage '```&#10;PS C:\> New-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Capture-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Remove-WindowsDriver]: pwsh.md#remove-windowsdriver '```&#10;PS C:\> Remove-WindowsDriver&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Remove-Driver`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Remove-WindowsImage]: pwsh.md#remove-windowsimage '```&#10;PS C:\> Remove-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Remove-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'
[Remove-WindowsPackage]: pwsh.md#remove-windowspackage '```&#10;PS C:\> Remove-WindowsPackage&#10;```&#10;&#10;Equivalent to `Dism.exe /Image:foldername /Remove-Package`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 78'
[Save-WindowsImage]: pwsh.md#save-windowsimage '```&#10;PS C:\> Save-WindowsImage&#10;```&#10;&#10;Equivalent to `Dism.exe /Commit-Image`&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 77'

<!-- Hyper-V cmdlets -->
[Move-VM]: pwsh.md#move-vm '```&#10;PS C:\> Move-VM&#10;```&#10;Moves a virtual machine to a new Hyper-V host.'
[New-VMSwitch]: pwsh.md#new-vmswitch '```&#10;New-VMSwitch&#10;```&#10;Creates a new virtual switch on one or more virtual machine hosts.'
[Remove-VMNetworkAdapter]: pwsh.md#remove-vmnetworkadapter '```&#10;PS C:\> Remove-VMNetworkAdapter&#10;```&#10;Removes one or more virtual network adapters from a virtual machine.'

<!-- Storage Spaces -->
[Set-FileStorageTier]: pwsh.md#set-filestoragetier '```&#10;Set-FileStorageTier&#10;```&#10;Assign a file to a storage tier&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 133'

<!-- Datacenter Bridging -->
[New-NetQosPolicy]: pwsh.md#new-netqospolicy '```&#10;PS C:\> New-NetQosPolicy&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 144'
[New-NetQosTrafficClass]: pwsh.md#new-netqostrafficclass '```&#10;PS C:\> New-NetQosTrafficClass&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 144'
[Set-NetQoSdcbxSetting]: pwsh.md#set-netqosdcbxsetting '```&#10;PS C:\> Set-NetQoSdcbxSetting&#10;```&#10;&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 143'
[Enable-NetQosFlowControl]: pwsh.md#enable-netqosflowcontrol '```&#10;Enable-NetQosFlowControl&#10;```&#10;Enables link level flow control based on the IEEE 802.1p priority.&#10;Zacker, Craig. _Installation, Storage and Compute with Windows Server 2016: Exam Ref 70-740_. 2017: 145'


<code>NanoServerImage&nbsp;[n][New-NanoServerImage] [e][Edit-NanoServerImage]</code> 
**AppxProvisioned**
<code>DataFile&nbsp;[s][Set-AppxProvisionedDataFile]</code> 
<code>Package&nbsp;[a][Add-AppxProvisionedPackage] [g][Get-AppxProvisionedPackage] [r][Remove-AppxProvisionedPackage]</code> 
**Cluster**
<code>[g][Get-Cluster]&nbsp;[n][New-Cluster]&nbsp;[t][Test-Cluster]</code>
<code>Access&nbsp;[b][Block-ClusterAccess]&nbsp;[g][Get-ClusterAccess]&nbsp;[r][Remove-ClusterAccess]</code>
<code>Disk&nbsp;[a][Add-ClusterDisk]</code>
<code>FileServerRole&nbsp;[a][Add-ClusterFileServerRole]</code>
<code>GenericApplicationRole&nbsp;[a][Add-ClusterGenericApplicationRole]</code>
<code>Group&nbsp;[a][Add-ClusterGroup]</code>
<code>Node&nbsp;[a][Add-ClusterNode]&nbsp;[g][Get-ClusterNode]&nbsp;[r][Remove-ClusterNode]&nbsp;[sp][Stop-ClusterNode]&nbsp;[ss][Suspend-ClusterNode]</code>
<code>Quorum&nbsp;[g][Get-ClusterQuorum]</code>
<code>Resource&nbsp;[a][Add-ClusterResource]</code>
<code>ResourceDependency&nbsp;[a][Add-ClusterResourceDependency]</code>
<code>ScaleOutFileServer&nbsp;[a][Add-ClusterScaleOutFileServer]</code>
<code>ServerRole&nbsp;[a][Add-ClusterServerRole]</code>
<code>SharedVolume&nbsp;a</code>
<code>StorageSpacesDirect&nbsp;[e][Enable-ClusterStorageSpacesDirect]</code>
<code>VirtualMachineRole&nbsp;a</code>
<code>VMMonitoredItem&nbsp;a</code>
**Container**
<code>[Attach][Attach-Container]&nbsp;[g][Get-Container]&nbsp;[r][Remove-Container]&nbsp;[n][New-Container]</code>
<code>Image&nbsp;[r][Remove-ContainerImage]&nbsp;[ct][ConvertTo-ContainerImage]</code>
<code>ImageTag [a][Add-ContainerImageTag]</code>
<code>Session [et][Enter-ContainerSession]</code>
**NetAdapter**
<code>Rdma&nbsp;[g][Get-NetAdapterRdma]&nbsp;[e][Enable-NetAdapterRdma]</code>
<code>Vmq&nbsp;[e][Enable-NetAdapterVmq]&nbsp;[g][Get-NetAdapterVmq]&nbsp;[s][Set-NetAdapterVmq]</code>
<code>VmqQueue&nbsp;[g][Get-NetAdapterVmqQueue]</code>
**NetQoS**
<code>DcbxSetting&nbsp;[s][Set-NetQosDcbxSetting]</code>
<code>FlowControl&nbsp;[e][Enable-NetQosFlowControl]</code>
<code>Policy&nbsp;[n][New-NetQosPolicy]</code>
<code>TrafficClass&nbsp;[n][New-NetQosTrafficClass]</code>
**Smb**
<code>ClientConfiguration&nbsp;[g][Get-SmbClientConfiguration]</code>
<code>OpenFile&nbsp;[g][Get-SmbOpenFile]&nbsp;[cs][Close-SmbOpenFile]</code>
<code>ServerConfiguration&nbsp;[g][Get-SmbServerConfiguration]&nbsp;[s][Set-SmbServerConfiguration]</code>
<code>Session&nbsp;[cs][Close-SmbSession]&nbsp;[g][Get-SmbSession]</code>
<code>Share&nbsp;[n][New-SmbShare]&nbsp;[r][Remove-SmbShare]</code>
<code>ShareAccess&nbsp;[g][Get-SmbShareAccess]&nbsp;[bl][Block-SmbShareAccess]&nbsp;[gr][Grant-SmbShareAccess]&nbsp;[rk][Revoke-SmbShareAccess]&nbsp;[uk][Unblock-SmbShareAccess]</code>
**SmigServer** 
<code>Data&nbsp;[rc][Receive-SmigServerData]&nbsp;[sd][Send-SmigServerData]</code>
<code>Feature&nbsp;[g][Get-SmigServerFeature]</code>
<code>Setting&nbsp;[ex][Export-SmigServerSetting]&nbsp;[ip][Import-SmigServerSetting]</code>
**VM** 
<code>[m][Move-VM]</code>
<code>NetworkAdapter&nbsp;[a][Add-VMNetworkAdapter]&nbsp;[r][Remove-VMNetworkAdapter]&nbsp;[s][Set-VMNetworkAdapter]</code> 
<code>Switch&nbsp;[n][New-VMSwitch]</code> 
**Windows**
<code>Driver&nbsp;[a][Add-WindowsDriver]&nbsp;[ep][Export-WindowsDriver]&nbsp;[g][Get-WindowsDriver]&nbsp;[r][Remove-WindowsDriver]</code>
<code>Image&nbsp;[a][Add-WindowsImage]&nbsp;[en][Expand-WindowsImage]&nbsp;[n][New-WindowsImage]&nbsp;[sv][Save-WindowsImage]&nbsp;[ep][Export-WindowsImage]&nbsp;[g][Get-WindowsImage]&nbsp;[mt][Mount-WindowsImage]&nbsp;[r][Remove-WindowsImage]&nbsp;[dm][Dismount-WindowsImage]</code>
<code>ImageContent&nbsp;[g][Get-WindowsImageContent]</code>
<code>OptionalFeature&nbsp;[d][Disable-WindowsOptionalFeature] [e][Enable-WindowsOptionalFeature] [g][Get-WindowsOptionalFeature] </code>
<code>Package[a][Add-WindowsPackage] [g][Get-WindowsPackage] [r][Remove-WindowsPackage]</code>
<code>Unattend&nbsp;[Apply][Apply-WindowsUnattend]</code>

# Tasks
##### Remote administration
- Server Manager: `Configure-SMremoting`
- MMC snap-ins: `Enable-NetFirewallRule` (and `cmdkey` if a local account is necessary)

##### Storage Spaces
- Install Storage Replica on both servers
- Restart
- `Test-SRTopology`
- `New-SRGroup` on the host
- **`New-SRPartnership`**